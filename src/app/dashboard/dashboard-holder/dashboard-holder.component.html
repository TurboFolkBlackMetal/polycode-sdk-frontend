<ng-container *ngIf="screenSize$ | async as screenSize">
  <div *ngIf="screenSize === 'xl' || screenSize === 'lg' || screenSize === '2xl'; else smallerScreenMsg">
    <div *ngIf="issuer$ | async as myIssuer" class="w-full h-full flex flex-row justify-center items-center px-2 pb-8">
      <div *ngIf="this.projectInfoHolderState$ | async as projectInfoHolderState"
        class="w-full max-w-[1400px] px-8 flex-col">
        <div class="flex flex-row items-center text-sm mb-2">

          <div routerLink="/" class="text-sm underline text-violet-800 cursor-pointer">
            My Workspaces
          </div>
          <div class="ml-2 mr-2">/</div>
          <div>
            {{ myIssuer.infoData.name }}
          </div>

          <!-- HIDE PROJECT INFO -->
          <div *ngIf="projectInfoHolderState === 'open'" class="cursor-pointer w-56 ml-4 py-2 px-6 rounded-full bg-gray-100 border border-gray-200
        hover:bg-gray-200 float-right flex flex-row justify-center items-center"
            (click)="toggleProjectInfoHolderState()">
            <div class="mr-2 text-xs uppercase font-semibold text-gray-700">Hide info</div>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
            </svg>
          </div>

          <!-- SHOW PROJECT INFO -->
          <div *ngIf="projectInfoHolderState === 'closed'" class="cursor-pointer ml-4 w-56 py-2 px-6 rounded-full bg-gray-100 hover:bg-gray-200
         border border-gray-200 float-right flex flex-row justify-center items-center"
            (click)="toggleProjectInfoHolderState()">
            <div class="mr-2 text-xs uppercase font-semibold text-gray-700">Show info</div>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </div>

          <div class="ml-2 text-red-700 px-8
         text-xs font-medium flex flex-row items-center py-2 rounded-lg bg-red-50">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
          
          </div>
        </div>

        <div [class.!h-32]="projectInfoHolderState === 'open'"
          class=" bg-white w-full shadow-sm px-4 my-4 h-0 transition-all rounded-xl flex flex-col justify-start">

          <div [class.opacity-0]="projectInfoHolderState === 'closed'" class="flex flex-row justify-start">



            <div class="flex justify-center flex-col">
              <img class="h-8 object-contain" src="{{ myIssuer.infoData.logo | toUrlIPFS }}" alt="" srcset="" />
            </div>



            <div class="py-4 flex flex-row ml-4 w-full">
              <div class="flex flex-row justify-between">
                <div class="text-xl font-semibold text-gray-700 h-full flex flex-row">
                  <div class="flex flex-col justify-center mr-2 text-sm">
                    {{ myIssuer.infoData.name }}
                  </div>
                  <div class="flex flex-row items-center bg-violet-500 hover:bg-violet-600 cursor-pointer
              px-4 text-white rounded-full transition-all" routerLinkActive="!bg-violet-900" routerLink="settings">
                    <div class="text-xs uppercase mr-2">Settings</div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                      stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                  </div>
                  <div *ngIf="network$ | async as currentNetwork"
                    class="flex flex-col justify-center h-full bg-violet-50 text-xs uppercase px-8 mx-2 rounded-lg">
                    <div class="flex flex-row py-2">
                      <span class="font-normal mr-1">Project network: </span>
                      <div class="flex flex-row items-center">
                        <img [src]="currentNetwork.iconURL" class="w-4 h-4 mr-2 ml-2" alt="">
                        <div>{{ currentNetwork.name }}</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="text-sm text-gray-700 flex flex-row items-center" *ngIf="apiKey$ | async as apiKey">
                  <div *ngIf="apiKey.api_key.length > 0">
                    <span class="px-8 py-2 rounded-lg bg-violet-50"> <span
                        class="mr-2 text-xs uppercase font-semibold">Your API Key:</span>
                      {{ apiKey.api_key | apiKeyShort }}...
                      <app-value-copy class="ml-2" [value]="apiKey.api_key"></app-value-copy>
                    </span>
                  </div>
                  <div *ngIf="apiKey.api_key.length > 0">
                    <span class="ml-2 px-8 py-2 rounded-lg bg-violet-50"> <span
                        class="mr-2 text-xs uppercase font-semibold">Project ID:</span>
                      {{ projectID | addrShort | apiKeyShort }}...
                      <app-value-copy class="ml-2" [value]="projectID"></app-value-copy>
                    </span>
                  </div>


                </div>
              </div>

              <ng-template #loadingApiKey>
                <div class="mx-4 px-4 py-2 border border-gray-200 rounded-full flex flex-row items-center">
                  <app-spinner></app-spinner>
                </div>
              </ng-template>
            </div>
          </div>

          <div *ngIf="projectInfoHolderState === 'open'"
            class="w-full bg-sky-50 border-sky-100 border rounded-lg py-3 text-sky-800 px-6 text-xs font-medium flex justify-between items-center">
            <div>Use this dashboard to build your Web3 app backend. Use the SDK to build the frontend.
              <a target="_blank"
                class="px-4 py-1 bg-sky-200 tracking-wider hover:text-white hover:bg-violet-900 text-sky-700 ml-2 rounded-full text-xs uppercase"
                href="https://docs.dev3.sh/welcome-to-dev3/sdk/initialization">üìñ &nbsp; Read SDK docs</a>
              <a target="_blank"
                class="px-4 py-1 ml-2 bg-sky-200 tracking-wider hover:text-white hover:bg-violet-900 text-sky-700 rounded-full text-xs uppercase"
                href="https://docs.dev3.sh/welcome-to-dev3/guides/">
                üöÄ &nbsp; Read our Guides
              </a>

            </div>
            <!-- <span class="bg-gray-700 text-white rounded-md px-4 py-1 mx-2 text-xs font-mono">npm install dev3-sdk</span> -->
          </div>

        </div>



        <div class="w-full flex flex-row">


          <div class="sidebar-width sticky h-full flex flex-col bg-dash-l mb-2 rounded-lg dash-side-holder">

            <!-- <div
            routerLinkActive="!bg-violet-900 !shadow-xl"
            class="py-3 my-1 rounded-lg !cursor-default
            bg-violet-700 text-white font-semibold opacity-25 text-xs pl-8 flex flex-row items-center"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
            class="w-5 h-5 -ml-2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V13.5zm0 2.25h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25V18zm2.498-6.75h.007v.008h-.007v-.008zm0 2.25h.007v.008h-.007V13.5zm0 2.25h.007v.008h-.007v-.008zm0 2.25h.007v.008h-.007V18zm2.504-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zm0 2.25h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V18zm2.498-6.75h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V13.5zM8.25 6h7.5v2.25h-7.5V6zM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 002.25 2.25h10.5a2.25 2.25 0 002.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0012 2.25z" />
            </svg>
          
            <div class="font-medium uppercase !cursor-default ml-3">Workflows</div>
        </div> -->



        <div class="text-xs uppercase tracking-wider flex flex-row items-center text-gray-500 font-semibold">
          <span class="mr-2">üèó</span>
          
          
          Build Web3 Apps
        </div>
        <div class="bg-violet-700 rounded-md shadow-md mt-2">

              <div routerLinkActive="active-dash-sidebar-item" routerLink="authorizations"
                class="py-3 mx-2 mt-2 mb-1 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M13.5 10.5V6.75a4.5 4.5 0 119 0v3.75M3.75 21.75h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                  </svg>

                </div>
                <div class="font-medium">Wallet Authorizations</div>
              </div>

              <div routerLinkActive="active-dash-sidebar-item" routerLink="contracts"
                class="py-3 mx-2 my-1 mb-1 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
                  </svg>
                </div>
                <div class="font-medium">Smart Contracts</div>
              </div>

              <div routerLinkActive="active-dash-sidebar-item" routerLink="address-book"
                class="py-3 mx-2 my-1 mb-1 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg class="h-4 w-4" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M16 8.33864V25.672M16 8.33864C14.4427 7.30397 12.328 6.66797 10 6.66797C7.672 6.66797 5.55733 7.30397 4 8.33864V25.672C5.55733 24.6373 7.672 24.0013 10 24.0013C12.328 24.0013 14.4427 24.6373 16 25.672M16 8.33864C17.5573 7.30397 19.672 6.66797 22 6.66797C24.3293 6.66797 26.4427 7.30397 28 8.33864V25.672C26.4427 24.6373 24.3293 24.0013 22 24.0013C19.672 24.0013 17.5573 24.6373 16 25.672"
                      stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="font-medium">Address Book</div>
              </div>

              <div routerLinkActive="active-dash-sidebar-item" routerLink="third-party-integrations"
                class="py-3 mx-2 mt-1 mb-2 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 48.39 48.39 0 01-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 00-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 01-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 00.657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 005.427-.63 48.05 48.05 0 00.582-4.717.532.532 0 00-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 00.658-.663 48.422 48.422 0 00-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 01-.61-.58v0z" />
                  </svg>
                  
                </div>
                <div class="font-medium">Third Party Plugins</div>
              </div>



            </div>
<!-- 
            <div class="text-xs uppercase tracking-wider flex flex-row items-center text-gray-500 mt-4 font-semibold">
              <span class="mr-2">ü§ñ</span>
              
              
              Automate Web3 Actions
            </div> -->

            <!-- <div class="bg-violet-700 rounded-md shadow-md mt-2">
              <div routerLinkActive="active-dash-sidebar-item" routerLink="airdrops"
                class="mx-2 my-1 mt-2 py-3 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg class="h-4 w-4" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M27.3504 12.8913C26.6776 11.701 25.4527 10.8557 23.995 10.7177C22.3992 10.571 20.8984 11.2093 20.0358 12.4514C19.2595 11.3301 17.9225 10.4848 16.4561 10.4848C14.8517 10.4848 13.3595 11.2956 12.6177 12.5981C11.8413 11.4595 10.4526 10.6659 8.98624 10.6659C7.38185 10.6659 5.97586 11.563 5.23405 12.8568H5.2168C5.22542 6.76709 10.1766 1.94531 16.2922 1.94531C22.4079 1.94531 27.359 6.9051 27.359 13.0121"
                      stroke="white" stroke-width="1.5" stroke-miterlimit="10" />
                    <path d="M5.22461 12.8711L14.4973 25.111" stroke="white" stroke-width="1.5"
                      stroke-miterlimit="10" />
                    <path d="M27.4191 12.8711L18.1465 25.111" stroke="white" stroke-width="1.5"
                      stroke-miterlimit="10" />
                    <path d="M20.0369 12.457L16.8281 25.111" stroke="white" stroke-width="1.5" stroke-miterlimit="10" />
                    <path d="M12.5156 12.457L15.7244 25.111" stroke="white" stroke-width="1.5" stroke-miterlimit="10" />
                    <path
                      d="M18.4917 25.1133H14.2306C13.7494 25.1133 13.3594 25.5033 13.3594 25.9845V29.1156C13.3594 29.5968 13.7494 29.9868 14.2306 29.9868H18.4917C18.9728 29.9868 19.3629 29.5968 19.3629 29.1156V25.9845C19.3629 25.5033 18.9728 25.1133 18.4917 25.1133Z"
                      stroke="white" stroke-width="1.5" stroke-miterlimit="10" />
                  </svg>
                </div>
                <div class="font-medium">Token Airdrops</div>
              </div>

              <div routerLinkActive="active-dash-sidebar-item" routerLink="payments"
                class="py-3 mx-2 my-1 mb-2 text-white rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <div class="flex justify-center mr-2">
                  <svg class="h-4 w-4" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M1.33398 19.6667L6.66732 14.3333M6.66732 6.33333H22.6673H6.66732ZM22.6673 6.33333L17.334 1L22.6673 6.33333ZM22.6673 6.33333L17.334 11.6667L22.6673 6.33333ZM17.334 19.6667H1.33398H17.334ZM1.33398 19.6667L6.66732 25L1.33398 19.6667Z"
                      stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="font-medium">Payment Requests</div>
              </div>

              
            </div> -->

            <div class="text-xs uppercase tracking-wider flex flex-row items-center text-gray-500 mt-4 font-semibold">
              <span class="mr-2">üìä</span>
              
              Analytics
            </div>

            <div class="bg-violet-700 rounded-md shadow-md mt-2">

              <div routerLinkActive="active-dash-sidebar-item" routerLink="onramp"
                class="py-3 mx-2 my-1 text-white opacity-25 rounded-lg text-xs text-center flex flex-row items-center pl-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                  stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
                <div class="font-medium ml-2">Analytics (Coming Soon)</div>
              </div>
            </div>




          </div>
          <div *ngIf="(isBackendAuthorized$ | async); else notAuthorizedMsg" class="content-width">
            <div *ngIf="apiKey$ | async as apiKey; else createApiKeyMsg">
              <router-outlet></router-outlet>
            </div>
            <ng-template #createApiKeyMsg>
              <div class="w-full py-16 flex flex-row items-center justify-center">
                <app-spinner></app-spinner>
              </div>

            </ng-template>
          </div>
        </div>
      </div>
    </div>

  </div>
  <ng-template #smallerScreenMsg>
    <div class="w-full h-screen flex justify-center items-center">
      <div class="m-4">
        <app-info-snippet [content]="{ title: 'Screen size incompatibility!', sections: [
          'Smaller screen sizes (e.g. mobile) are not yet supported by the Polycode dashboard!'
        ]}"></app-info-snippet>
      </div>
    </div>
  </ng-template>

  <ng-template #notAuthorizedMsg>
    <div class="w-full h-screen flex justify-center items-center">
      <div class="m-4">
        <app-info-snippet [content]="{ title: 'Please authorize yourself!', sections: [
          'You must authorize yourself to use the app!'
        ]}"></app-info-snippet>
      </div>
    </div>
  </ng-template>

</ng-container>